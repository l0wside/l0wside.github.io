<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>QVisu: Weather Element</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">QVisu
   </div>
   <div id="projectbrief">Qt-based visualization for smart homes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('weather.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Weather Element </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The weather element downloads the weather forecast from yr.no and displays it. For the next 24 hours, it shows max/min temperatures (in 6h intervals), clouds, precipitation (rain/snow), and wind. For the following days, it shows max/min temperatures, clouds, and precipitation.</p>
<div class="image">
<img src="weather.png" />
</div>
<h2>Syntax</h2>
<pre>
&lt;element type="weather" position="x,y" width="w" height="h"&gt;
    &lt;latitude&gt;...&lt;/latitude&gt;
    &lt;longitude&gt;...&lt;/longitude&gt;
    &lt;color&gt;...&lt;/color&gt;
    &lt;text&gt;...&lt;/text&gt;
    &lt;days&gt;...&lt;/days&gt;
&lt;/element&gt;
</pre><p>Elements in <b>bold</b> are mandatory.</p>
<table class="doxtable">
<tr>
<th>element/tag </th><th>comment  </th></tr>
<tr>
<td>width, height </td><td>Can be chosen arbitrarily, minimum width is 3, minimum height is 2. Default is 6x3 </td></tr>
<tr>
<td><b>latitude, longitude</b> </td><td>Geographical position of your location <b>in decimal notation</b>. Stuttgart (48&deg; 46' 39'' N, 9&deg; 10' 43'' E) is 48.7775 / 9.178611 </td></tr>
<tr>
<td>text </td><td>Title text </td></tr>
<tr>
<td>color </td><td>Background color. Default value is cyan. </td></tr>
<tr>
<td>days </td><td>Number of days after today for which the forecast is displayed. yr.no seems to have a ten-day forecast. Default is 3. </td></tr>
</table>
<h2>Known bugs</h2>
<ul>
<li>The algorithm to convert the yr.no data to something that can be displayed is not optimal (and barely documented).</li>
<li>Thunderstorms are not displayed, snowfall is shown as rain. The data from yr.no simply does not have the info.</li>
<li>Non-transparent proxies are not supported, i.e. if you have something between you and the yr.no server that requires authentication, the element will fail.</li>
</ul>
<p>Changing the data source to either the DWD plugin of smarthome.py or to the DWD FTP server would be a good thing. Volunteers welcome.</p>
<h2>Display algorithm</h2>
<p>yr.no delivers an XML file with various forecasts for different time ranges and different items. For instance, precipitation and temperature are in different items. Plus, yr.no will deliver a forecast for the next day from 0:00 to 1:00, one from 0:00 to 6:00, one for the whole day.</p>
<p>QVisu first aggregates the data into its own data structure, always overwriting data for longer time ranges with data for shorter time ranges (to get the best resolution out of the data).</p>
<p>Then, it calculates the average precipitation (i.e. rain/snow) and wind from this data set, as well as the max and min temperatures. It ignores the max/min values from yr.no and determines them directly from the expected temperatures. This works quite well for short-term, but has its downsides for long-term prognosis. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jul 7 2015 22:36:32 for QVisu by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
